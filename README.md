# üéµ Music Sales and Trends Analysis Using SQL
## üìä Project Overview
This project explores a relational database of a digital music store to derive meaningful business insights using SQL. The database includes information on artists, albums, tracks, genres, customers, invoices, and employees.

The goal is to analyze customer behavior, track popularity, revenue trends, and employee impact using SQL queries and optional visualizations.
## üõ†Ô∏è Tools Used

- **PostgreSQL** 
- **Power BI  for visualization**

- ## üìÅ Database Schema
- - - `Artist`, `Album`, `Track`, `Genre`, `MediaType`
- `Customer`, `Invoice`, `InvoiceLine`
- `Employee`
- `Playlist`, `PlaylistTrack`
- > Relationships:  
> - One-to-many between Artist ‚Üí Album ‚Üí Track  
> - Track is linked with Genre, MediaType, Playlist  
> - Track sales are captured in InvoiceLine  
> - Invoices link to Customers and are supported by Employees
## üí° Business Questions Answered with SQL

### üéß Track & Genre Analysis
**1. Which genres generated the highest revenue?**  
```sql
SELECT g.Name AS Genre, ROUND(SUM(il.UnitPrice * il.Quantity), 2) AS TotalRevenue
FROM Genre g
JOIN Track t ON g.GenreId = t.GenreId
JOIN InvoiceLine il ON t.TrackId = il.TrackId
GROUP BY g.Name
ORDER BY TotalRevenue DESC;
```
**2. What are the top 10 most purchased tracks by quantity?**
```sql
SELECT 
t.name AS Track,
SUM(il.Quantity) AS TotalSold
FROM track t
JOIN invoice_line il 
ON t.track_id = il.track_id
GROUP BY t.Name
ORDER BY TotalSold DESC
LIMIT 10;
```
**3. What is the average track length by genre?**
```sql
SELECT 
g.Name AS Genre,
ROUND( AVG(t.Milliseconds))  AS AvgTrackLength
FROM Track t
JOIN  Genre g ON t.genre_id = g.genre_id
GROUP BY g.Name
ORDER BY AvgTrackLength DESC;
```

### üíø Artist & Album Insights

**4. Which artists have generated the most revenue across all their tracks?**

```sql
SELECT ar.Name AS Artist, SUM(il.unit_price * il.Quantity) AS Revenue
FROM invoice_line il
JOIN Track t
ON il.track_id = t.track_id
JOIN  Album a
ON t.album_id = a.album_id
JOIN Artist ar
ON a.artist_id = ar.artist_id
GROUP BY ar.Name
ORDER BY Revenue DESC;
```
**5. Which albums contain the highest number of tracks?**
```sql
SELECT 
a.Title AS AlbumTitle,
ar.Name AS Artist,
COUNT(t.track_Id) AS NumberOfTracks
FROM album a
JOIN Artist ar
ON a.artist_id = ar.artist_id
JOIN Track t
ON a.album_id = t.album_id
GROUP BY 1,2
ORDER BY NumberOfTracks DESC;
```

### üì¶ Sales & Revenue Trends
**6. What is the total revenue generated per month?**
```sql
SELECT DATE_TRUNC('month', invoice_date) AS month,
SUM(total) AS revenue
FROM invoice
GROUP BY 1
ORDER BY month;
```

**7. What is the average invoice value?**
```sql
SELECT 
ROUND(AVG(Total)) AS AverageInvoiceValue
FROM Invoice;
```
**8. What are the top 5 invoices by total amount?**

```sql
SELECT 
    invoice_id,
    customer_id,
    invoice_date,
    Total
FROM Invoice
ORDER BY Total DESC
LIMIT 5;
```
### üë• Customer Insights

**9. Which customers have spent the most?**
```sql
SELECT 
    c.first_name || ' ' || c.last_name AS CustomerName,
    ROUND(SUM(i.total) ) AS TotalSpent
FROM customer c
JOIN invoice i
ON c.Customer_id = i.Customer_id
GROUP BY c.Customer_id
ORDER BY TotalSpent DESC;
```

**10. How does revenue vary by country?**
```sql
SELECT 
    c.Country,
    SUM(i.Total)AS Revenue
FROM customer c
JOIN invoice i 
ON c.customer_id = i.customer_id
GROUP BY c.Country
ORDER BY Revenue DESC;
```

**11. How many invoices has each customer generated?**

```sql

SELECT 
    c.Customer_id,
    c.first_name || ' ' || c.last_name AS CustomerName,
    COUNT(i.invoice_id) AS InvoiceCount
FROM customer c
LEFT JOIN Invoice i 
ON c.Customer_id = i.Customer_id
GROUP BY c.Customer_id, c.first_name, c.last_name
ORDER BY InvoiceCount DESC;
```
### üë®‚Äçüíº Employee Analysis

**12. How many customers does each employee manage?**
```sql

SELECT 
    e.first_name || ' ' || e.last_name AS Employee,
    COUNT(c.customer_id) AS CustomerCount
FROM employee e
LEFT JOIN customer c 
ON e.employee_id = c.support_rep_id
GROUP BY e.employee_id;
```

**13. What is the total revenue generated by customers supported by each employee?**


